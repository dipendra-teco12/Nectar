<!-- pay.html -->
<!DOCTYPE html>
<html>
  <head>
    <title>PayPal Order Test</title>
  </head>
  <body>
    <h2>Test PayPal Payment Integration</h2>
    <button onclick="startPayment()">Pay with PayPal</button>

    <script>
      async function startPayment() {
        const response = await fetch(
          "http://localhost:3000/api/pay/create-payment",
          {
            method: "POST",
            credentials: "include", //
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              userId: "68b93eb0e210d104444d2ed0",
              address: "123 Test St, Test City",
              location: {
                type: "Point",
                coordinates: [78.9012, 12.3456],
              },
              Products: [
                {
                  ProductId: "68be82dfee4216f1a1868391",
                  name: "Test Product",
                  price: 25,
                  quantity: 2,
                },
                {
                  ProductId: "68be82dfee4216f1a1868391",
                  name: "Test Product",
                  price: 233,
                  quantity: 2,
                },
              ],
            }),
          }
        );

        const data = await response.json();
        if (data.approvalUrl) {
          window.location.href = data.approvalUrl;
        } else {
          alert("Payment creation failed: " + (data.error || "Unknown error"));
        }
      }
    </script>
  </body>
</html>
